; This looks for improper tail recursion in the compiler
(define-test "many top-level expressions" (expect 500
	(+
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4)))
	  (length (list (zero? 4))))))
